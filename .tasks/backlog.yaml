# Task Backlog
# Remaining pending tasks sorted by priority

tasks:
  - task_id: TASK-014
    spec_id: null
    title: "Write E2E integration tests"
    priority: 1
    status: pending
    dependencies: []
    estimated_effort: 4 hours
    description: |
      Create end-to-end integration tests.
      Mock external APIs (Drive, OpenAI, Qdrant).
      Test complete sync pipeline with real-world scenarios.
      Verify error handling in full flow.
    test_refs: []
    notes: "Unit tests completed (66 tests). E2E tests with mocked services needed."

  - task_id: TASK-021
    spec_id: null
    title: "Production deployment"
    priority: 1
    status: pending
    dependencies:
      - TASK-014
      - TASK-015
    estimated_effort: 3 hours
    description: |
      Deploy to Cloudflare Workers production.
      Configure all secrets via wrangler.
      Create KV namespace in production.
      Set up Qdrant collection in production.
      Test with real Google Drive folder.
      Monitor first sync execution.
    test_refs: []

  - task_id: TASK-015
    spec_id: null
    title: "Create deployment documentation"
    priority: 2
    status: pending
    dependencies:
      - TASK-014
    estimated_effort: 2 hours
    description: |
      Document setup instructions.
      Document secrets configuration (wrangler secret put).
      Document KV namespace setup.
      Document manual resync procedures.
      Create troubleshooting guide.
      Add monitoring and alerting setup guide.
    test_refs: []

  - task_id: TASK-016
    spec_id: null
    title: "Implement Drive path building"
    priority: 3
    status: pending
    dependencies: []
    estimated_effort: 2 hours
    description: |
      Enhance buildFilePath() to construct full folder paths.
      Traverse parent folders to build complete file paths.
      Currently returns only file name - needs full path reconstruction.
      Cache folder path mappings for performance.
    test_refs: []
    notes: "TODO in src/drive/drive-client.ts:293"

  - task_id: TASK-017
    spec_id: null
    title: "Improve file filtering in changes API"
    priority: 3
    status: pending
    dependencies: []
    estimated_effort: 2 hours
    description: |
      Enhance isFileInFolder() with recursive parent checking.
      Currently only checks direct parent match.
      Need to traverse entire parent chain for accuracy.
      Cache folder hierarchy for performance.
    test_refs: []
    notes: "TODO in src/drive/drive-client.ts:269"

  - task_id: TASK-018
    spec_id: null
    title: "Add monitoring and alerting"
    priority: 2
    status: pending
    dependencies:
      - TASK-021
    estimated_effort: 3 hours
    description: |
      Integrate error tracking (e.g., Sentry).
      Add performance monitoring.
      Set up Slack/Discord webhooks for error notifications.
      Track sync success/failure metrics.
      Monitor sync duration and file processing rates.
    test_refs: []
    notes: "Mentioned in error-handling spec but not yet implemented"

  - task_id: TASK-019
    spec_id: null
    title: "Add support for additional file types"
    priority: 4
    status: pending
    dependencies: []
    estimated_effort: 4 hours
    description: |
      Extend beyond .md files.
      Support .txt files.
      Add .pdf text extraction.
      Add .docx text extraction.
      Add content extraction for Google Docs native format.
      Update filtering logic and tests.
    test_refs: []

  - task_id: TASK-020
    spec_id: null
    title: "Implement chunking with overlap"
    priority: 4
    status: pending
    dependencies: []
    estimated_effort: 2 hours
    description: |
      Add configurable overlap between chunks (e.g., 200 tokens).
      Improve semantic coherence across chunk boundaries.
      Currently no overlap (noted in embedding-pipeline spec).
      Add tests for overlap functionality.
    test_refs: []
    notes: "Enhancement mentioned in SPEC-embedding-pipeline-1"

  - task_id: TASK-022
    spec_id: null
    title: "Add incremental embedding optimization"
    priority: 4
    status: pending
    dependencies: []
    estimated_effort: 3 hours
    description: |
      Cache embeddings for unchanged chunks.
      Only re-embed modified chunks when file changes.
      Reduce API calls and processing time.
      Store chunk hash with vectors for change detection.
    test_refs: []

  - task_id: TASK-023
    spec_id: null
    title: "Add rate limiting and cost tracking"
    priority: 3
    status: pending
    dependencies:
      - TASK-021
    estimated_effort: 2 hours
    description: |
      Implement rate limiting for API calls.
      Track OpenAI API usage and costs.
      Track Drive API quota usage.
      Add dashboard for cost monitoring.
    test_refs: []
