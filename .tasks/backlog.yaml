# Task Backlog
# Remaining pending tasks sorted by priority

tasks:
  - task_id: TASK-036
    spec_id: SPEC-embedding-pipeline-1
    title: "Align embedding dimensions with Vectorize limit"
    priority: 1
    status: pending
    dependencies: []
    estimated_effort: 0.5 hours
    description: |
      Update specs, docs, and defaults to match Cloudflare Vectorize's 1536-dimension limit. Current
      guidance still mentions text-embedding-3-large (3072 dims), which fails when creating indexes.
      Ensure EmbeddingClient uses dimensions=1536 (or an explicit parameter) and refresh README/
      wrangler instructions accordingly.
    test_refs:
      - "TEST-embedding-pipeline-1"
    notes: |
      Cloudflare API rejects dimensions >1536 (error code 3003). worknote-store was recreated at 1536
      on 2025-11-16 during TASK-021 deployment.

  - task_id: TASK-021
    spec_id: SPEC-deployment-1
    title: "Production deployment"
    priority: 1
    status: pending
    dependencies: []
    estimated_effort: 1.5 hours
    description: |
      Resume production verification once Zero Trust auth is in place: validate /admin/status and
      /admin/resync with real auth, and observe first scheduled cron at 17:00 UTC.
    test_refs:
      - TEST-deployment-1
      - TEST-deployment-2
      - TEST-deployment-3
      - TEST-deployment-4
    notes: |
      Paused awaiting Zero Trust rollout; health/dashboard already live at work.kadragon.work/*.

  - task_id: TASK-034
    spec_id: SPEC-embedding-pipeline-1
    title: "Integrate Cloudflare AI Gateway for all OpenAI Calls"
    priority: 2
    status: pending
    dependencies: []
    estimated_effort: 2.5 hours
    description: |
      Refactor the OpenAI client initialization to create a centralized, reusable factory. This will route all OpenAI API calls (current embedding, future chat, etc.) through Cloudflare's AI Gateway for improved caching, rate limiting, and analytics.
    # ... (rest of the task description)

  - task_id: TASK-033
    spec_id: null
    title: "Refactor folder structure: rename src/ to worker/"
    priority: 3
    status: pending
    dependencies:
      - TASK-032
    estimated_effort: 1.5 hours
    description: |
      Refactor project folder structure for clarity.
    # ... (rest of the task description)
